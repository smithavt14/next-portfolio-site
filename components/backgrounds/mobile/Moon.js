'use client';
import { useEffect, useRef } from 'react';
import gsap from 'gsap';

const MoonMobile = () => {
    const mobileMoonRef = useRef(null);

    useEffect(() => {
        if (typeof window !== 'undefined') {
            const { MotionPathPlugin } = require('gsap/MotionPathPlugin');
            gsap.registerPlugin(MotionPathPlugin);
        }

        if (!mobileMoonRef.current) return;

        const timeline = gsap.timeline();

        try {
            timeline.to(mobileMoonRef.current, {
                duration: 60,
                motionPath: {
                    path: "#mobileGravity",
                    align: "#mobileGravity",
                    autoRotate: true,
                    alignOrigin: [0.0, 0.0],
                    start: 1.4,
                    end: 0.4
                },
                ease: "none",
                repeat: -1
            });
        } catch (error) {
            console.error('GSAP animation error:', error);
        }

        return () => timeline.kill();
    }, []);

    return (
        <svg viewBox="0 0 390 844" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.2" d="M399.461 858.523L414.483 858.92C409.546 860.657 404.534 860.425 399.461 858.523L-336.161 839.052L-336.16 776.024V734.556L-336.84 734.847L-338.295 735.429L-337.519 725.621L-336.063 706.684L-334.414 685.027C-334.414 685.027 -251.272 626.855 -148.534 620.833C-81.6899 616.949 -0.197022 669.876 59.6604 667.351C119.52 664.826 146.393 603.352 209.84 586.649C268.417 571.227 338.438 835.645 399.461 858.523Z" fill="#5A2489" />
            <path opacity="0.2" d="M446.391 859.792L464.073 860.26C458.55 862.203 452.632 861.921 446.391 859.792L-336.161 839.052L-336.16 776.025L-332.959 733.39L-332.183 722.416L-331.115 708.238C-331.115 708.238 -237.301 642.102 -134.564 647.831C-50.3536 652.493 2.13087 705.712 61.9903 703.188C121.848 700.662 155.124 637.052 218.669 620.445C276.668 605.176 379.947 837.125 446.391 859.792Z" fill="#5A2878" />
            <path d="M255.771 855.467L-349.389 861.348V836.456V763.397V715.101C-349.389 715.101 -264.188 720.772 -240.943 739.095C-200.591 770.878 -179.761 795.972 -141.273 801.176C-134.255 802.079 -127.17 802.307 -120.11 801.854C-64.7364 798.687 -76.47 761.137 -23.7274 732.292C-21.0963 730.823 -18.3547 729.579 -15.6131 728.446C34.935 707.409 88.4448 742.699 88.4448 742.699L255.771 855.467Z" fill="url(#paint0_linear_110_3453)" />
            <path d="M1106 818.392V871.707L-421 860.15C-173.709 801.783 120.657 778.335 419.143 769.905C685.309 762.389 871.41 787.898 1020.15 806.641C1049.05 810.234 1077.68 814.118 1106 818.392Z" fill="url(#paint1_linear_110_3453)" />
            <path d="M420.159 482.837C420.159 539.812 373.971 586 316.996 586C260.02 586 213.833 539.812 213.833 482.837C213.833 425.862 260.02 379.674 316.996 379.674C373.971 379.674 420.159 425.862 420.159 482.837Z" fill="#381956" />
            <path d="M352.925 579.571C299.174 576.014 256.676 531.288 256.676 476.636C256.676 432.297 284.649 394.491 323.91 379.902C377.661 383.459 420.159 428.185 420.159 482.837C420.159 527.177 392.186 564.983 352.925 579.571Z" fill="#201240" />
            <path d="M416.534 454.021C387.118 456.524 353.739 460.493 318.512 465.963C281.176 471.742 246.298 478.485 216.306 485.419C155.281 499.558 114.366 514.661 113.443 524.947C113.405 525.255 113.405 525.563 113.482 525.871L113.597 526.334L113.943 526.565C114.058 526.642 114.174 526.719 114.289 526.758C114.404 526.796 114.52 526.912 114.674 526.989L114.866 527.104C114.943 527.143 115.058 527.22 115.135 527.259C115.212 527.297 115.327 527.374 115.443 527.412L115.751 527.567C116.058 527.721 116.443 527.875 116.789 528.029H116.827C117.557 528.337 118.365 528.607 119.25 528.876L119.634 528.992L120.057 529.108L120.48 529.223C120.634 529.262 120.749 529.3 120.903 529.339L121.326 529.455L121.749 529.57C122.364 529.724 122.98 529.878 123.633 529.994L124.095 530.109H124.133C124.518 530.187 124.941 530.264 125.364 530.34L125.633 530.379L126.248 530.495L127.402 530.687L127.555 530.726C128.132 530.803 128.709 530.919 129.325 530.996C130.017 531.111 130.709 531.188 131.439 531.304L132.132 531.381L132.824 531.458C134.016 531.612 135.246 531.728 136.515 531.843L137.822 531.958C158.01 533.692 188.389 532.998 224.996 529.955H225.073C224.881 529.609 224.727 529.223 224.534 528.876C224.419 528.684 224.342 528.491 224.227 528.299L224.035 527.914V527.798C223.457 526.635 222.919 525.452 222.42 524.253L220.92 524.369C208.231 525.448 197.271 526.141 188.504 526.372C183.967 526.488 180.044 526.488 176.776 526.372C174.392 526.295 172.392 526.103 170.739 525.871L170.315 525.795C167.277 525.332 165.586 524.601 165.432 523.637C165.393 523.174 165.586 522.713 165.932 522.404C169.278 518.628 188.735 512.734 218.229 506.107C246.529 499.751 284.096 492.739 325.474 486.344C361.006 480.834 393.996 476.635 420.914 473.977C427.295 473.361 433.333 472.782 438.987 472.358V452.441C431.799 452.826 424.302 453.366 416.534 454.021ZM421.303 494.319C421.184 496.168 420.993 498.017 420.722 499.828C420.649 500.434 420.564 501.038 420.452 501.639L420.339 502.409C420.26 502.794 420.226 503.18 420.147 503.527C423.569 502.756 426.951 501.985 430.3 501.215L431.45 500.945L432.301 500.752C434.528 500.213 436.755 499.712 438.953 499.173V490.466C433.451 491.699 427.566 493.009 421.303 494.319Z" fill="url(#paint2_linear_110_3453)" />
            <path d="M414.11 451.016C384.688 453.52 351.316 457.488 316.094 462.958C278.752 468.737 243.874 475.441 213.883 482.414C151.396 496.9 109.944 512.388 111.02 522.674V522.867C111.213 524.138 112.097 525.294 113.558 526.334L113.905 526.565C114.02 526.642 114.135 526.719 114.251 526.758C114.366 526.796 114.481 526.912 114.635 526.989L114.827 527.105C114.904 527.143 115.02 527.22 115.096 527.259C115.173 527.298 115.289 527.374 115.404 527.413L115.711 527.567C116.019 527.721 116.404 527.875 116.75 528.029H116.788C117.519 528.338 118.326 528.607 119.211 528.877L119.595 528.992L120.018 529.108L120.441 529.223C120.595 529.262 120.71 529.3 120.864 529.339L121.287 529.455L121.711 529.57C122.326 529.724 122.941 529.878 123.595 529.994L124.094 530.148H124.133C124.517 530.225 124.941 530.302 125.364 530.379L125.632 530.418L126.247 530.533L127.401 530.726L127.555 530.764C128.132 530.841 128.709 530.957 129.324 531.034C130.016 531.149 130.708 531.227 131.439 531.342L132.131 531.42L132.823 531.497C134.015 531.651 135.246 531.766 136.515 531.882L137.823 531.997C158.01 533.731 188.388 533.037 224.996 529.994H225.072C224.88 529.647 224.726 529.262 224.534 528.915C224.419 528.723 224.342 528.53 224.227 528.338L224.034 527.952V527.836C223.457 526.673 222.918 525.491 222.419 524.292C221.986 523.313 221.576 522.324 221.189 521.325L221.112 521.171L219.612 521.287L217.613 521.48L216.305 521.595C214.459 521.749 212.652 521.904 210.883 522.019L208.307 522.212C203.423 522.558 198.886 522.867 194.695 523.059C189.349 523.329 184.581 523.444 180.505 523.483H176.737L175.852 523.444H175.314L174.161 523.406C173.622 523.368 173.084 523.368 172.584 523.329L172.199 523.291L171.815 523.252L171.084 523.213C170.353 523.137 169.662 523.098 169.008 523.02L168.508 522.944C168.008 522.867 167.547 522.828 167.124 522.713L166.854 522.674H166.777L166.47 522.597C166.277 522.558 166.085 522.52 165.932 522.482L165.509 522.365C165.394 522.328 165.24 522.289 165.124 522.25C165.009 522.212 164.855 522.173 164.74 522.135L164.47 522.019L164.24 521.904L164.008 521.788L163.817 521.673C163.74 521.634 163.663 521.595 163.586 521.518C163.547 521.48 163.509 521.48 163.47 521.441C163.432 521.403 163.393 521.364 163.355 521.325C163.317 521.287 163.278 521.249 163.24 521.21C163.201 521.171 163.163 521.133 163.163 521.095C163.163 521.095 163.125 521.056 163.125 521.018C163.086 520.94 163.047 520.901 163.047 520.825C163.047 520.786 163.047 520.748 163.009 520.748V520.671C162.817 519.515 164.816 518.051 168.661 516.355L168.931 516.24C177.199 512.657 193.695 508.073 215.844 503.103C244.145 496.746 281.717 489.734 323.09 483.339C358.622 477.83 391.617 473.63 418.529 470.972C425.835 470.24 432.679 469.624 439.027 469.161V449.205C431.067 449.667 422.723 450.283 414.11 451.016ZM418.879 491.313C418.687 493.779 418.411 496.207 418.033 498.634C417.994 498.903 417.954 499.135 417.915 499.404C417.836 499.789 417.796 500.175 417.723 500.521L418.727 500.29L419.877 500.021L420.722 499.828C426.991 498.403 433.068 496.977 438.953 495.552V486.883C432.758 488.309 426.027 489.811 418.879 491.313Z" fill="url(#paint3_linear_110_3453)" />
            <path d="M438.835 458.258C409.419 460.763 376.041 464.731 340.813 470.201C303.477 475.98 268.599 482.684 238.608 489.657C179.352 503.373 139.014 518.012 135.9 528.26V528.299C135.707 528.877 135.669 529.493 135.746 530.109V530.187C135.823 530.572 135.939 530.996 136.13 531.342C136.207 531.496 136.322 531.651 136.4 531.805L136.438 531.882L137.745 531.997C157.933 533.731 188.311 533.037 224.918 529.994C216.766 530.495 209.768 530.726 204.077 530.726C200.347 530.726 197.194 530.572 194.656 530.341C192.041 530.071 190.119 529.686 188.965 529.185C188.158 528.838 187.735 528.414 187.658 527.914C187.581 527.413 187.85 526.95 188.427 526.411C189.504 525.41 191.58 524.292 194.579 523.059C189.234 523.329 184.466 523.444 180.39 523.483H176.699L175.814 523.444H175.276L174.122 523.406C173.584 523.368 173.046 523.368 172.546 523.329L172.161 523.291L171.777 523.252L171.046 523.213C170.315 523.137 169.623 523.098 168.97 523.021L168.469 522.944C167.97 522.867 167.508 522.828 167.085 522.713L166.816 522.674H166.739L166.431 522.597C166.239 522.558 166.047 522.52 165.893 522.482L165.47 522.365L165.086 522.25C164.97 522.212 164.816 522.173 164.701 522.134L164.432 522.019L164.201 521.904L163.971 521.788L163.778 521.673C163.702 521.634 163.625 521.595 163.547 521.518C163.509 521.48 163.471 521.48 163.432 521.441L163.317 521.325L163.201 521.21C163.163 521.171 163.125 521.133 163.125 521.095C163.125 521.095 163.086 521.056 163.086 521.018C163.048 520.94 163.009 520.901 163.009 520.825C163.009 520.786 163.009 520.748 162.971 520.748V520.671C162.778 519.515 164.778 518.051 168.624 516.356L168.893 516.24C177.16 512.657 193.656 508.073 215.805 503.103C244.105 496.746 281.678 489.734 323.05 483.339C358.582 477.83 391.577 473.63 418.49 470.972C425.796 470.24 432.64 469.624 438.987 469.161V458.258H438.835Z" fill="#F97B45" />
            <path d="M414.363 450.863C423.248 450.092 431.743 449.514 439.821 449.013V475.828C437.437 476.058 435.013 476.29 432.515 476.521C405.597 479.179 372.608 483.417 337.076 488.888C295.698 495.283 258.131 502.333 229.828 508.652C204.526 514.354 186.607 519.477 179.916 523.214H184.184L185.914 523.176C188.915 523.09 191.915 522.974 194.913 522.829C202.603 522.444 211.486 521.789 221.33 520.941L225.389 529.845C225.389 529.845 212.541 530.788 206.256 531.19C202.603 531.421 199.066 531.652 195.604 531.806C172.302 533 152.691 533.039 138.271 531.806L136.771 531.69H136.618C136.182 531.653 135.746 531.615 135.31 531.575H135.195C132.387 531.267 129.773 530.958 127.427 530.534C126.927 530.458 126.389 530.342 125.889 530.265H125.658C124.734 530.08 123.811 529.887 122.89 529.687H122.813C121.669 529.439 120.54 529.131 119.429 528.762H119.391L118.968 528.608L118.852 528.57H118.813C118.275 528.377 117.737 528.185 117.237 527.991L117.16 527.953L116.583 527.722L116.506 527.683C116.199 527.568 115.93 527.414 115.66 527.298C115.545 527.26 115.468 527.183 115.353 527.144L115.314 527.183L114.853 526.952L114.738 526.874C114.622 526.797 114.468 526.72 114.353 526.644L114.276 526.605L114.238 526.566C114.084 526.489 113.93 526.374 113.815 526.297C113.033 525.783 112.366 525.115 111.854 524.332C111.55 523.881 111.354 523.367 111.277 522.829C109.7 512.543 151.268 496.94 214.139 482.415C244.133 475.442 279.011 468.739 316.347 462.96C351.569 457.373 384.908 453.367 414.363 450.863Z" fill="#743495" fill-opacity="0.25" />
            <path d="M225.107 529.909C199.739 532.445 152.104 534.418 129.273 531.036C123.91 530.242 127.281 531.108 120.817 529.345C114.616 527.654 113.77 526.526 113.77 526.526C113.77 526.526 121.064 528.478 124.717 528.748C128.404 529.045 132.096 529.277 135.791 529.442C138.868 529.557 141.598 529.596 143.79 529.442C152.134 528.941 162.055 528.363 170.207 526.938C173.399 526.437 178.099 525.35 181.136 524.271C181.752 524.04 182.521 523.808 183.367 523.539C206.504 522.58 221.161 521.171 221.161 521.171C221.161 521.171 222.454 524.823 225.107 529.909Z" fill="#743495" fill-opacity="0.75" />
            <path id="mobileGravity" d="M477.474 504.37C468.029 526.54 439.494 538.277 400.663 539.11C361.883 539.942 313.046 529.883 263.358 508.713C213.671 487.544 172.585 459.292 146.32 430.748C120.021 402.167 108.718 373.457 118.164 351.287C127.609 329.118 156.144 317.381 194.975 316.548C233.755 315.716 282.592 325.775 332.279 346.944C381.967 368.113 423.053 396.365 449.318 424.909C475.617 453.49 486.92 482.2 477.474 504.37Z" stroke="black" stroke-opacity="0.02" />
            <g ref={mobileMoonRef}>
                <path d="M197.885 451.47C197.885 468.897 183.825 483 166.447 483C163.878 483 161.361 482.713 158.902 482.083C142.045 477.898 131.755 460.814 135.928 443.901C140.102 426.99 157.135 416.67 173.991 420.855C187.992 424.352 197.826 436.965 197.885 451.47Z" fill="#381441" />
                <path d="M197.885 451.47C197.885 468.897 183.825 483 166.447 483C163.878 483 161.361 482.713 158.902 482.083C144.843 471.878 141.647 452.157 151.82 438.054C155.475 432.952 160.571 429.068 166.45 426.901C172.328 424.734 178.719 424.386 184.796 425.9C192.968 431.805 197.885 441.322 197.885 451.47Z" fill="#211038" />
            </g>
            <defs>
                <linearGradient id="paint0_linear_110_3453" x1="-110.505" y1="566.67" x2="70.4293" y2="1378.67" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#9133C2" />
                    <stop offset="0.37" stop-color="#26163A" />
                </linearGradient>
                <linearGradient id="paint1_linear_110_3453" x1="329.705" y1="231.241" x2="353.514" y2="1365.22" gradientUnits="userSpaceOnUse">
                    <stop offset="0.43" stop-color="#9133C2" />
                    <stop offset="0.54" stop-color="#26163A" />
                </linearGradient>
                <linearGradient id="paint2_linear_110_3453" x1="113.417" y1="492.639" x2="438.993" y2="492.639" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#F973BE" />
                    <stop offset="0.45" stop-color="#743495" />
                    <stop offset="0.51" stop-color="#5A2878" />
                    <stop offset="0.58" stop-color="#3F1C59" />
                    <stop offset="0.66" stop-color="#2C1343" />
                    <stop offset="0.73" stop-color="#200E36" />
                    <stop offset="0.79" stop-color="#1C0C31" />
                </linearGradient>
                <linearGradient id="paint3_linear_110_3453" x1="110.962" y1="491.05" x2="438.987" y2="491.05" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#F9730A" />
                    <stop offset="0.45" stop-color="#743495" />
                    <stop offset="0.51" stop-color="#5A2878" />
                    <stop offset="0.58" stop-color="#3F1C59" />
                    <stop offset="0.66" stop-color="#2C1343" />
                    <stop offset="0.73" stop-color="#200E36" />
                    <stop offset="0.79" stop-color="#1C0C31" />
                </linearGradient>
            </defs>
        </svg>
    )
}

export default MoonMobile

