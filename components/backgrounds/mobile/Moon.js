'use client';
import { useEffect, useRef } from 'react';
import gsap from 'gsap';

const MoonMobile = () => {
    const mobileMoonRef = useRef(null);

    useEffect(() => {
        if (typeof window !== 'undefined') {
            const { MotionPathPlugin } = require('gsap/MotionPathPlugin');
            gsap.registerPlugin(MotionPathPlugin);
        }

        if (!mobileMoonRef.current) return;

        const timeline = gsap.timeline();

        try {
            timeline.to(mobileMoonRef.current, {
                duration: 60,
                motionPath: {
                    path: "#mobileGravity",
                    align: "#mobileGravity",
                    autoRotate: true,
                    alignOrigin: [0.0, 0.0],
                    start: 1.4,
                    end: 0.4
                },
                ease: "none",
                repeat: -1
            });
        } catch (error) {
            console.error('GSAP animation error:', error);
        }

        return () => timeline.kill();
    }, []);

    return (
        <svg viewBox="0 0 390 660" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.2" d="M342.05 657.676L352.561 657.954C349.106 659.169 345.6 659.007 342.05 657.676L-172.641 644.052L-172.64 599.954V570.94L-173.116 571.144L-174.134 571.551L-173.591 564.688L-172.573 551.439L-171.419 536.286C-171.419 536.286 -113.247 495.585 -41.3642 491.372C5.40444 488.654 62.4224 525.686 104.303 523.919C146.184 522.152 164.987 479.141 209.379 467.454C250.363 456.664 299.355 641.669 342.05 657.676Z" fill="#5A2489" />
            <path opacity="0.2" d="M374.886 658.563L387.257 658.891C383.393 660.251 379.252 660.053 374.886 658.563L-172.641 644.052L-172.64 599.954L-170.401 570.124L-169.857 562.446L-169.111 552.526C-169.111 552.526 -103.472 506.252 -31.5897 510.261C27.3294 513.523 64.0511 550.759 105.933 548.992C147.813 547.225 171.096 502.719 215.556 491.1C256.136 480.417 328.397 642.704 374.886 658.563Z" fill="#5A2878" />
            <path d="M241.515 655.538L-181.896 659.652V642.236V591.119V557.328C-181.896 557.328 -122.284 561.295 -106.02 574.115C-77.7871 596.353 -63.2128 613.911 -36.2844 617.552C-31.3736 618.184 -26.4165 618.343 -21.477 618.026C17.2661 615.81 9.05651 589.537 45.9588 569.356C47.7997 568.328 49.7179 567.457 51.6361 566.665C87.003 551.946 124.442 576.637 124.442 576.637L241.515 655.538Z" fill="url(#paint0_linear_110_3453)" />
            <path d="M836.393 629.597V666.9L-232 658.814C-58.9782 617.977 146.98 601.57 355.822 595.673C542.049 590.413 672.258 608.261 776.325 621.375C796.55 623.889 816.578 626.607 836.393 629.597Z" fill="url(#paint1_linear_110_3453)" />
            <path d="M440.021 395.256C440.021 445.203 399.531 485.693 349.584 485.693C299.637 485.693 259.147 445.203 259.147 395.256C259.147 345.309 299.637 304.819 349.584 304.819C399.531 304.819 440.021 345.309 440.021 395.256Z" fill="#381956" />
            <path d="M381.082 480.057C333.961 476.939 296.706 437.73 296.706 389.82C296.706 350.95 321.228 317.808 355.645 305.019C402.766 308.137 440.021 347.346 440.021 395.256C440.021 434.126 415.499 467.268 381.082 480.057Z" fill="#201240" />
            <path d="M436.843 369.995C411.056 372.189 381.795 375.668 350.913 380.464C318.183 385.53 287.608 391.44 261.315 397.519C207.818 409.915 171.951 423.154 171.142 432.171C171.108 432.441 171.108 432.712 171.176 432.982L171.277 433.387L171.58 433.59C171.681 433.658 171.782 433.725 171.884 433.759C171.985 433.793 172.086 433.894 172.221 433.962L172.389 434.062C172.456 434.097 172.558 434.164 172.625 434.198C172.693 434.232 172.794 434.299 172.895 434.333L173.165 434.468C173.434 434.603 173.772 434.738 174.075 434.873H174.109C174.749 435.143 175.457 435.38 176.232 435.616L176.569 435.717L176.94 435.819L177.311 435.92C177.446 435.954 177.547 435.988 177.682 436.021L178.052 436.123L178.423 436.224C178.963 436.359 179.502 436.494 180.075 436.596L180.48 436.697H180.513C180.85 436.765 181.221 436.832 181.592 436.9L181.828 436.934L182.367 437.035L183.379 437.203L183.513 437.237C184.019 437.305 184.525 437.407 185.064 437.474C185.671 437.575 186.278 437.643 186.918 437.744L187.525 437.811L188.132 437.879C189.176 438.014 190.255 438.116 191.368 438.217L192.514 438.318C210.211 439.838 236.842 439.23 268.934 436.562H269.001C268.832 436.258 268.698 435.92 268.529 435.616C268.428 435.447 268.361 435.279 268.26 435.11L268.091 434.772V434.671C267.585 433.651 267.113 432.614 266.675 431.563L265.36 431.665C254.237 432.61 244.629 433.218 236.943 433.421C232.966 433.522 229.527 433.522 226.662 433.421C224.572 433.353 222.819 433.185 221.369 432.982L220.998 432.914C218.335 432.509 216.852 431.868 216.717 431.023C216.684 430.617 216.852 430.213 217.156 429.942C220.089 426.632 237.145 421.465 263.001 415.656C287.81 410.083 320.743 403.937 357.017 398.33C388.166 393.5 417.086 389.82 440.683 387.489C446.277 386.949 451.57 386.442 456.527 386.07V368.609C450.226 368.947 443.653 369.42 436.843 369.995ZM441.024 405.321C440.92 406.942 440.752 408.564 440.515 410.151C440.451 410.682 440.377 411.212 440.278 411.738L440.179 412.414C440.11 412.751 440.08 413.089 440.011 413.393C443.011 412.718 445.976 412.042 448.911 411.367L449.92 411.13L450.666 410.961C452.618 410.489 454.57 410.05 456.497 409.577V401.944C451.674 403.025 446.515 404.173 441.024 405.321Z" fill="url(#paint2_linear_110_3453)" />
            <path d="M434.718 367.36C408.927 369.555 379.67 373.034 348.793 377.83C316.058 382.895 285.483 388.772 259.191 394.886C204.413 407.584 168.074 421.162 169.018 430.179V430.348C169.186 431.462 169.962 432.476 171.242 433.387L171.546 433.59C171.647 433.658 171.748 433.725 171.85 433.759C171.95 433.793 172.052 433.894 172.186 433.962L172.355 434.063C172.422 434.097 172.524 434.164 172.591 434.198C172.658 434.232 172.759 434.299 172.861 434.333L173.13 434.468C173.4 434.603 173.737 434.738 174.041 434.873H174.074C174.715 435.144 175.423 435.38 176.198 435.616L176.535 435.717L176.906 435.819L177.276 435.92C177.412 435.954 177.513 435.988 177.647 436.022L178.018 436.123L178.389 436.225C178.928 436.359 179.468 436.494 180.041 436.596L180.479 436.731H180.513C180.85 436.798 181.221 436.866 181.592 436.934L181.827 436.967L182.367 437.069L183.378 437.237L183.513 437.271C184.019 437.338 184.525 437.44 185.064 437.508C185.67 437.609 186.277 437.676 186.918 437.778L187.524 437.845L188.131 437.913C189.176 438.048 190.255 438.149 191.367 438.251L192.514 438.352C210.211 439.872 236.842 439.264 268.933 436.596H269.001C268.832 436.292 268.697 435.954 268.529 435.65C268.428 435.481 268.36 435.312 268.259 435.144L268.09 434.806V434.704C267.584 433.684 267.112 432.649 266.675 431.597C266.295 430.739 265.935 429.872 265.596 428.996L265.529 428.862L264.214 428.963L262.461 429.132L261.315 429.233C259.696 429.368 258.113 429.504 256.562 429.605L254.303 429.773C250.022 430.077 246.044 430.348 242.37 430.517C237.684 430.753 233.504 430.854 229.931 430.888H226.628L225.852 430.854H225.38L224.369 430.821C223.897 430.787 223.425 430.787 222.987 430.753L222.65 430.719L222.313 430.686L221.672 430.652C221.031 430.584 220.425 430.55 219.852 430.483L219.414 430.415C218.976 430.348 218.571 430.314 218.2 430.213L217.964 430.179H217.897L217.627 430.111C217.458 430.077 217.29 430.044 217.156 430.01L216.784 429.908C216.684 429.875 216.549 429.841 216.447 429.807C216.346 429.773 216.212 429.74 216.11 429.706L215.874 429.605L215.672 429.504L215.469 429.402L215.301 429.301C215.234 429.267 215.166 429.233 215.099 429.166C215.065 429.132 215.032 429.132 214.997 429.098C214.964 429.064 214.93 429.031 214.897 428.996C214.863 428.963 214.829 428.929 214.796 428.895C214.762 428.862 214.728 428.828 214.728 428.794C214.728 428.794 214.694 428.76 214.694 428.727C214.661 428.659 214.627 428.625 214.627 428.558C214.627 428.524 214.627 428.49 214.593 428.49V428.423C214.425 427.41 216.178 426.126 219.548 424.64L219.785 424.538C227.032 421.398 241.494 417.379 260.911 413.022C285.72 407.449 318.658 401.303 354.926 395.696C386.075 390.866 415 387.185 438.593 384.855C444.997 384.213 450.997 383.673 456.561 383.267V365.773C449.584 366.178 442.27 366.718 434.718 367.36ZM438.899 402.687C438.731 404.848 438.489 406.976 438.158 409.104C438.123 409.341 438.089 409.543 438.054 409.779C437.985 410.117 437.95 410.455 437.886 410.759L438.766 410.556L439.774 410.32L440.515 410.151C446.011 408.902 451.338 407.652 456.497 406.402V398.803C451.066 400.053 445.165 401.37 438.899 402.687Z" fill="url(#paint3_linear_110_3453)" />
            <path d="M456.393 373.71C430.607 375.905 401.346 379.383 370.464 384.179C337.733 389.245 307.158 395.122 280.866 401.235C228.92 413.259 193.558 426.092 190.828 435.076V435.11C190.659 435.616 190.626 436.156 190.693 436.697V436.765C190.761 437.102 190.862 437.474 191.03 437.778C191.098 437.913 191.199 438.048 191.266 438.183L191.3 438.251L192.446 438.352C210.143 439.872 236.774 439.264 268.866 436.596C261.719 437.035 255.584 437.237 250.595 437.237C247.325 437.237 244.561 437.102 242.336 436.9C240.044 436.663 238.359 436.326 237.348 435.887C236.639 435.583 236.269 435.211 236.201 434.772C236.134 434.333 236.37 433.928 236.876 433.455C237.82 432.577 239.64 431.597 242.269 430.517C237.583 430.753 233.403 430.854 229.83 430.888H226.594L225.819 430.854H225.347L224.336 430.821C223.864 430.787 223.392 430.787 222.953 430.753L222.616 430.719L222.279 430.686L221.639 430.652C220.998 430.584 220.391 430.55 219.819 430.483L219.38 430.415C218.942 430.348 218.537 430.314 218.167 430.213L217.931 430.179H217.863L217.593 430.111C217.425 430.077 217.256 430.044 217.121 430.01L216.751 429.908L216.414 429.807C216.312 429.773 216.177 429.74 216.077 429.706L215.84 429.605L215.638 429.504L215.436 429.402L215.268 429.301C215.2 429.267 215.133 429.233 215.065 429.166C215.031 429.132 214.998 429.132 214.964 429.098L214.863 428.997L214.762 428.895C214.729 428.862 214.694 428.828 214.694 428.794C214.694 428.794 214.661 428.76 214.661 428.727C214.627 428.659 214.593 428.625 214.593 428.558C214.593 428.524 214.593 428.49 214.56 428.49V428.423C214.391 427.41 216.144 426.126 219.515 424.64L219.751 424.538C226.998 421.398 241.46 417.379 260.876 413.022C285.685 407.449 318.623 401.302 354.892 395.696C386.041 390.866 414.965 387.185 438.558 384.855C444.963 384.213 450.962 383.673 456.527 383.267V373.71H456.393Z" fill="#F97B45" />
            <path d="M434.941 367.226C442.729 366.55 450.177 366.044 457.258 365.605V389.111C455.168 389.313 453.043 389.517 450.854 389.719C427.256 392.049 398.336 395.765 367.187 400.56C330.914 406.167 297.981 412.347 273.17 417.886C250.989 422.885 235.28 427.377 229.414 430.652H233.156L234.673 430.619C237.304 430.544 239.933 430.442 242.561 430.315C249.303 429.977 257.09 429.403 265.72 428.66L269.278 436.465C269.278 436.465 258.015 437.292 252.505 437.644C249.303 437.846 246.202 438.049 243.168 438.184C222.74 439.231 205.548 439.265 192.907 438.184L191.592 438.083H191.458C191.076 438.051 190.693 438.017 190.312 437.981H190.21C187.749 437.712 185.457 437.441 183.401 437.07C182.963 437.002 182.491 436.901 182.052 436.833H181.85C181.04 436.671 180.231 436.502 179.423 436.326H179.356C178.353 436.109 177.363 435.839 176.389 435.516H176.356L175.985 435.381L175.884 435.347H175.85C175.378 435.178 174.906 435.01 174.468 434.84L174.4 434.807L173.895 434.604L173.827 434.57C173.558 434.469 173.322 434.334 173.086 434.232C172.984 434.199 172.917 434.131 172.816 434.097L172.782 434.131L172.378 433.929L172.277 433.861C172.175 433.794 172.04 433.726 171.94 433.659L171.872 433.625L171.839 433.591C171.703 433.523 171.568 433.422 171.468 433.355C170.783 432.905 170.198 432.318 169.748 431.632C169.482 431.237 169.31 430.786 169.243 430.315C167.861 421.297 204.301 407.619 259.416 394.886C285.71 388.773 316.286 382.897 349.016 377.831C379.893 372.934 409.119 369.421 434.941 367.226Z" fill="#743495" fill-opacity="0.25" />
            <path d="M269.031 436.521C246.793 438.745 205.034 440.475 185.019 437.509C180.317 436.813 183.273 437.572 177.606 436.027C172.17 434.544 171.429 433.556 171.429 433.556C171.429 433.556 177.823 435.267 181.025 435.503C184.257 435.764 187.494 435.967 190.733 436.112C193.43 436.213 195.824 436.247 197.745 436.112C205.06 435.673 213.757 435.166 220.903 433.917C223.701 433.477 227.822 432.524 230.485 431.579C231.024 431.376 231.698 431.173 232.44 430.937C252.723 430.097 265.572 428.861 265.572 428.861C265.572 428.861 266.705 432.063 269.031 436.521Z" fill="#743495" fill-opacity="0.75" />
            <path id="mobileGravity" d="M490.21 414.109C481.945 433.507 456.966 443.795 422.929 444.525C388.944 445.254 346.14 436.439 302.588 417.884C259.036 399.329 223.026 374.566 200.009 349.551C176.957 324.499 167.072 299.357 175.337 279.959C183.601 260.56 208.581 250.272 242.617 249.542C276.603 248.813 319.406 257.628 362.958 276.183C406.511 294.739 442.52 319.501 465.538 344.516C488.59 369.568 498.474 394.71 490.21 414.109Z" stroke="black" stroke-opacity="0.02" />
            <g ref={mobileMoonRef}>
                <path d="M245.167 367.758C245.167 383.036 232.841 395.399 217.607 395.399C215.355 395.399 213.148 395.148 210.993 394.595C196.215 390.926 187.195 375.95 190.853 361.123C194.512 346.298 209.444 337.251 224.221 340.92C236.494 343.986 245.115 355.043 245.167 367.758Z" fill="#381441" />
                <path d="M245.167 367.758C245.167 383.036 232.841 395.399 217.607 395.399C215.355 395.399 213.148 395.148 210.993 394.595C198.668 385.649 195.866 368.36 204.785 355.998C207.988 351.525 212.456 348.12 217.61 346.22C222.763 344.321 228.365 344.016 233.693 345.343C240.857 350.519 245.167 358.862 245.167 367.758Z" fill="#211038" />
            </g>
            <defs>
                <linearGradient id="paint0_linear_110_3453" x1="-14.7566" y1="453.475" x2="111.837" y2="1021.6" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#9133C2" />
                    <stop offset="0.37" stop-color="#26163A" />
                </linearGradient>
                <linearGradient id="paint1_linear_110_3453" x1="293.244" y1="218.787" x2="309.903" y2="1012.2" gradientUnits="userSpaceOnUse">
                    <stop offset="0.43" stop-color="#9133C2" />
                    <stop offset="0.54" stop-color="#26163A" />
                </linearGradient>
                <linearGradient id="paint2_linear_110_3453" x1="171.119" y1="403.849" x2="456.532" y2="403.849" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#F973BE" />
                    <stop offset="0.45" stop-color="#743495" />
                    <stop offset="0.51" stop-color="#5A2878" />
                    <stop offset="0.58" stop-color="#3F1C59" />
                    <stop offset="0.66" stop-color="#2C1343" />
                    <stop offset="0.73" stop-color="#200E36" />
                    <stop offset="0.79" stop-color="#1C0C31" />
                </linearGradient>
                <linearGradient id="paint3_linear_110_3453" x1="168.967" y1="402.456" x2="456.527" y2="402.456" gradientUnits="userSpaceOnUse">
                    <stop offset="0.05" stop-color="#F9730A" />
                    <stop offset="0.45" stop-color="#743495" />
                    <stop offset="0.51" stop-color="#5A2878" />
                    <stop offset="0.58" stop-color="#3F1C59" />
                    <stop offset="0.66" stop-color="#2C1343" />
                    <stop offset="0.73" stop-color="#200E36" />
                    <stop offset="0.79" stop-color="#1C0C31" />
                </linearGradient>
            </defs>
        </svg>
    )
}

export default MoonMobile

